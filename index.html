<html lang="en">
<head>
<link rel="stylesheet" href="./dist/jquery.jqplot.css">
<title>Sci-Fi Book to movie adaptations</title>
</head>
<body>

<div id="reviewed-graph" style="height:600px;"></div>

<script type="text/javascript" src="./dist/jquery.js"></script>
<script type="text/javascript" src="./dist/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="./dist/plugins/jqplot.dateAxisRenderer.js"></script>
<script type="text/javascript" src="./dist/plugins/jqplot.highlighter.js"></script>
<script type="text/javascript" src="./dist/plugins/jqplot.cursor.js"></script>
<script type="text/javascript" src="./dist/plugins/jqplot.canvasTextRenderer.js"></script>
<script type="text/javascript" src="./dist/plugins/jqplot.canvasAxisLabelRenderer.js"></script>

<script type="text/javascript">

var raw_data = [
    {
        name: 'A Christmas Carol',
        author: 'Charles Dickens',
        publication_year: 1843,
        adaptations: [
            { year: 1901, title: 'Scrooge, or, Marley\'s Ghost' },
            { year: 1951, title: 'Scrooge' },
            { year: 1988, title: 'Scrooged' },
            { year: 1992, title: 'A Muppet Christmas Carol' },
            { year: 1999, title: 'A Christmas Carol' }
        ]
    },
    {
        name: 'Who Goes There?',
        author: 'John W. Campbell, Jr.',
        publication_year: 1938,
        adaptations: [
            { year: 1951, title: 'The Thing from Another World' },
            { year: 1982, title: 'The Thing' },
            { year: 2011, title: 'The Thing - Prequel' }
        ]
    },
    {
        name: 'Farewell to the Master',
        author: 'Harry Bates',
        publication_year: 1940,
        adaptations: [
            { year: 1951, title: 'The Day the Earth Stood Still' },
            { year: 2008, title: 'The Day the Earth Stood Still' }
        ]
    },
    {
        name: 'Day of the Triffids',
        author: 'John Wyndham',
        publication_year: 1951,
        adaptations: [
            { year: 1962, title: 'Day of the Triffids' },
            { year: 1980, title: 'Day of the Triffids' },
            { year: 2009, title: 'Day of the Triffids' }
        ]
    },
    {
        name: 'The Racer',
        author: 'Ib Melchior',
        publication_year: 1956,
        adaptations: [
            { year: 1975, title: 'Death Race 2000' },
            { year: 2009, title: 'Death Race' }
        ]
    },
    {
        name: 'The Fly',
        author: 'George Langelaan',
        publication_year: 1957,
        adaptations: [
            { year: 1958, title: 'The Fly' },
            { year: 1986, title: 'The Fly' }
        ]
    },
    {
        name: 'Monkey Planet',
        author: 'Pierre Boulle',
        publication_year: 1963,
        adaptations: [
            { year: 1968, title: 'Planet of the Apes' },
            { year: 2001, title: 'Planet of the Apes' }
        ]
    },
    {
        name: 'Eight O\'Clock in the Morning',
        author: 'Ray Nelson',
        publication_year: 1963,
        adaptations: [
            { year: 1988, title: 'They Live' },
        ]
    },
    {
        name: 'A Boy and His Dog',
        author: 'Harlan Ellison',
        publication_year: 1969,
        adaptations: [
            { year: 1975, title: 'A Boy and His Dog' },
        ]
    },
    {
        name: 'Enemy Mine',
        author: 'Barry B. Longyear',
        publication_year: 1979,
        adaptations: [
            { year: 1985, title: 'Enemy Mine' },
        ]
    },
    {
        name: 'Jurassic Park',
        author: 'Michael Crichton',
        publication_year: 1990,
        adaptations: [
            { year: 1993, title: 'Jurassic Park' },
        ]
    },
    {
        name: 'Timeline',
        author: 'Michael Crichton',
        publication_year: 1999,
        adaptations: [
            { year: 2003, title: 'Timeline' },
        ]
    },
    {
        name: 'Odd Thomas',
        author: 'Dean Koontz',
        publication_year: 2003,
        adaptations: [
            { year: 2013, title: 'Odd Thomas' },
        ]
    },
    {
        name: 'All You Need Is Kill',
        author: 'Hiroshi Sakurazaka',
        publication_year: 2004,
        adaptations: [
            { year: 2014, title: 'All You Need Is Kill' },
        ]
    },
 ];

var publication_data = [];
var reviewed_data = [];

$.each(raw_data, function(index, book) {
    publication_data.push([ book.publication_year, book.publication_year, book.name ]);
    $.each(book.adaptations, function (idx, adaptation) {
        console.dir(adaptation);
        reviewed_data.push([book.publication_year, adaptation.year, adaptation.title]);
    });
});

$('#reviewed-graph').html('');
var minYear = 1840;
var maxYear = 2015;
$.jqplot('reviewed-graph', [ reviewed_data, publication_data ], {
    title : 'Movie Adaptation vs Book Publication Dates (Podcast)',
    legend : {
        show: true,
        labels : ['Reviewed Movies', 'Books and Dates']
    },
    seriesDefaults: {
        showMarker: true,
        showLine: false,
    },
    highlighter: {
        show : true,
        tooltipAxes : 'y',
        yvalues : 2,
        formatString : '%s - %s',
    },
    axes : {
        xaxis : {
            label : 'Publication year (Books/Movies)',
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
            min: minYear,
            max: maxYear,
            numberTicks: ((maxYear-minYear)/10)+1
        },
        yaxis : {
            label : 'Adaptation year',
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
        }
    }
});

var adaptation_data = [
    //published, adapted, title
    [1940, 1951, 'The Day the Earth Stood Still'],
    [1951, 1962, 'Day of the Triffids'],
    [1956, 1975, 'Death Race 2000'],
    [1956, 2009, 'Death Race'],
    [1957, 1958, 'The Fly'],
    [1963, 1968, 'Planet of the Apes'],
    [1963, 1988, 'They Live'],
    [1990, 1993, 'Jurassic Park'],
    [1999, 2003, 'Timeline'],
    [2003, 2013, 'Odd Thomas'],
    [2004, 2014, 'Edge of Tomorrow'],
];

</script>
</body>
